<!DOCTYPE html>
<html lang="">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Ajax1-请求纯文本</title>
</head>

<body>
	<button id="button">请求纯文本</button>

	<br>
	<p id="text"></p>

	<script>
		document.getElementById('button').addEventListener("click", loadText);

		function loadText() {
			var xhr = new XMLHttpRequest();
			//console.log(xhr);
			//创建XMLHttpRequest对象
			xhr.open('GET', 'sample.txt', true);

			console.log("readystate:" + xhr.readyState);

			//onprogress
			xhr.onprogress = function() {
				console.log("测试readystate:" + xhr.readyState);
			}

			//两种方式请求 onload /onreadystatechang
			xhr.onload = function() {
				console.log("readystate:" + xhr.readyState);
				if (this.status == 200) {
					console.log(this.responseText);
					document.getElementById('text').innerHTML = this.responseText;
				}
			}



			/*		xhr.onreadystatechange = function() {
				console.log("readystate:" + xhr.readyState);
				if (this.status == 200 && this.readyState == 4) {
					console.log(this.responseText);
				} else if (this.status == 404) {
					console.log("网页不存在");
				}
			}
*/
			xhr.send();
		}
	</script>
</body>

</html>
